Context

Defaults: last 3 months, ≥ $1M now set.

Map still shows 0 for some views. Network likely returns jobs, but Status filter or client-side post-filter hides them.

Rules

Minimal changes; reuse existing hooks and types.

Do not change date/value logic.

Omit status from API query when no statuses are selected.

Tasks

Filter defaults

In filter store/init, set status = ['active','completed'] on first load.

Persist URL overrides; if URL has none, use these defaults.

Query builder

In jobs fetch util/hook, only append status=<value> when status.length > 0. If multiple, send repeated params or a comma the server expects. Prefer repeated params.

Server guard

In jobs list controller, if req.query.status is missing, do not filter by status. If multiple, accept array. Normalize to lowercase.

Client-side filtering

Ensure the map markers list uses exactly the API response filtered by current store state, not a hard-coded status==='active'.

Remove any extra status checks in the marker renderer or selector.

Debug visibility

After fetch, console.info('jobs fetched', data.length, {status, minValue, dateFrom, dateTo}) to confirm counts during verification. Remove before commit if noisy.

Deliverables

Updated filter store defaults.

Updated jobs query builder to omit empty status and support arrays.

Controller tweak to handle missing or multiple status.

Map selector free of hard-coded active-only filter.

Brief change log.

Acceptance Criteria

First load shows non-zero jobs with defaults (last 3 months, ≥ $1M, Active + Completed).

Network request contains dateFrom, dateTo, minValue=1000000; status=active and status=completed present, or status omitted if user unchecks all to mean “all”.

Unchecking all Status boxes shows all statuses.

Toggling a Status immediately updates the map and counts.

Verification

Hard refresh with no query params: markers render; “Total Jobs” > 0.

Inspect Network /api/jobs Response length > 0 and matches visible markers.

Toggle Completed off; count decreases accordingly.

Paste a URL with ?status=active only; only active jobs render.